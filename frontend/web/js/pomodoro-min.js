function Notifier(){}function desktopAlert(){var e=new Notifier;if(!e.HasSupport()){$("#error").show();return}if(!e.Notify("http://www.pomodoro.me/logo48.png","Pomodoro.me","Your time is up!")){$("#error").text('Permission denied. Click "Enable Desktop Notifications" to give us access to send notifications to your desktop.');$("#error").show()}else{$("#error").hide()}}function buzzer(){var e=new Audio("alarm.wav");e.play()}shortGlobalVar=5;longGlobalVar=15;Notifier.prototype.HasSupport=function(){if(window.webkitNotifications){return true}else{return false}};Notifier.prototype.RequestPermission=function(e){window.webkitNotifications.requestPermission(function(){if(e){e(window.webkitNotifications.checkPermission()==0)}})};Notifier.prototype.Notify=function(e,t,n){if(window.webkitNotifications.checkPermission()==0){var r=window.webkitNotifications.createNotification(e,t,n);r.show();setTimeout(function(){r.cancel()},"11000");return true}return false};$(function(){var e=new Notifier;if(!e.HasSupport()){$("#error").show();return}$("#request-permission").click(function(){$("#error").hide();e.RequestPermission()})});(function(e){function t(t){return e.extend({time_in_seconds:3600,time_format:"MM:ss",tick:function(e,t,n){document.title="("+n+")"},buzzer:function(e){document.title="Time finished!";desktopAlert();buzzer()},autostart:false},t)}e.fn.extend({createTimer:function(e){var r=t(e);timer_local=false;var i=this;i.text(n(new Date(r.time_in_seconds*1e3),r.time_format)).data("countdown.duration",r.time_in_seconds*1e3).data("countdown.state","ready").data("countdown.timer_id",(new Date).getTime());if(r.autostart){this.startTimer(r)}return this},startTimer:function(r){var i=t(r);return this.each(function(){var t=e(this).data("countdown.state","running");var r=t.data("countdown.timer_id");var s=(new Date).getTime()+t.data("countdown.duration");var o=setInterval(function(){if(r==t.data("countdown.timer_id")&&t.data("countdown.state")=="running"){var e=Math.round((s-(new Date).getTime())/1e3);if(e<=0){clearInterval(o);e=0}t.data("countdown.duration",e*1e3);var u=n(new Date(e*1e3),i.time_format);t.text(u);i.tick(t,e,u);e==0&&i.buzzer(t)}else{clearInterval(o)}},1e3)})},resetTimer:function(e){var r=t(e);document.title="pomodoro.me";var i=this;i.text(n(new Date(r.time_in_seconds*1e3),r.time_format)).data("countdown.duration",r.time_in_seconds*1e3).data("countdown.state","ready").data("countdown.timer_id",(new Date).getTime());return this},pauseTimer:function(){return this.data("countdown.state","paused")}});var n=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,i=function(e,t){e=String(e);t=t||2;while(e.length<t){e="0"+e}return e};return function(s,o,u){var l=n;if(arguments.length==1&&Object.prototype.toString.call(s)=="[object String]"&&!/\d/.test(s)){o=s;s=undefined}s=s?new Date(s):new Date;if(isNaN(s)){throw SyntaxError("invalid date")}o=String(l.masks[o]||o||l.masks["default"]);if(o.slice(0,4)=="UTC:"){o=o.slice(4);u=true}var c=u?"getUTC":"get",h=s[c+"Date"](),p=s[c+"Day"](),v=s[c+"Month"](),m=s[c+"FullYear"](),y=s[c+"Hours"](),b=s[c+"Minutes"](),w=s[c+"Seconds"](),E=s[c+"Milliseconds"](),S=u?0:s.getTimezoneOffset(),x={d:h,dd:i(h),ddd:l.i18n.dayNames[p],dddd:l.i18n.dayNames[p+7],m:v+1,mm:i(v+1),mmm:l.i18n.monthNames[v],mmmm:l.i18n.monthNames[v+12],yy:String(m).slice(2),yyyy:m,h:y%12||12,hh:i(y%12||12),H:y,HH:i(y),M:b,MM:i(b),s:w,ss:i(w),l:i(E,3),L:i(E>99?Math.round(E/10):E),t:y<12?"a":"p",tt:y<12?"am":"pm",T:y<12?"A":"P",TT:y<12?"AM":"PM",Z:u?"UTC":(String(s).match(t)||[""]).pop().replace(r,""),o:(S>0?"-":"+")+i(Math.floor(Math.abs(S)/60)*100+Math.abs(S)%60,4),S:["th","st","nd","rd"][h%10>3?0:(h%100-h%10!=10)*h%10]};return o.replace(e,function(e){return e in x?x[e]:e.slice(1,e.length-1)})}}();n.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};n.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}})(jQuery);$(function(){pomodoroValue=25*60;var e=pomodoroValue;$("#timerPosition").createTimer({time_in_seconds:pomodoroValue});$("#pomodoroButton").click(function(){e=pomodoroValue;$("#timerPosition").createTimer({time_in_seconds:pomodoroValue,autostart:true})});$("#shortBreakButton").click(function(){shortValue=shortGlobalVar*60;e=shortValue;$("#timerPosition").createTimer({time_in_seconds:shortValue,autostart:true})});$("#longBreakButton").click(function(){longValue=longGlobalVar*60;e=longValue;$("#timerPosition").createTimer({time_in_seconds:longValue,autostart:true})});$("#timerReset").click(function(){$("#timerPosition").resetTimer({time_in_seconds:e})})});